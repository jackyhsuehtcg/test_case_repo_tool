# 專案需求規格 (Project Requirements Specification)

## 1. 專案目的

- **1.1. Lark Client**: 開發一個 Lark Client，使其能夠讀取和寫入 Lark 多維表格中維護的測試案例庫 (Test Case Repo)。
- **1.2. 網頁介面**: 建立一個類似 TestRail 的網頁介面，用於呈現和管理測試案例。
- **1.3. 即時同步**: 確保在網頁介面上的所有變更都能即時同步到 Lark Base。
- **1.4. 介面分類**: 網站介面需以「團隊 (Team)」作為第一層分類，再進入「測試案例 (Test Case)」和「測試執行 (Test Run)」管理作為第二層。

## 2. 後端 Client

- **2.1. Lark Client**: 參考路徑 `/Users/hideman/code/jira_sync_v3/lark_client.py` 的既有實作。
- **2.2. JIRA Client**: 參考路徑 `/Users/hideman/code/jira_sync_v3/jira_client.py` 的既有實作。

## 3. 網頁介面

- **3.1. 整體風格**: 參考 `/Users/hideman/code/user_story_map_converter` 的既有成果。
- **3.2. 功能性頁面**:
    - 團隊管理介面
    - 團隊功能選擇頁面
    - 團隊測試案例管理頁面
    - 團隊測試執行管理頁面

### 3.2.1. 團隊功能選擇介面
- 作為專案首頁。
- 提供各團隊選擇其 Test Case Repo 的入口。
- 包含選單以進入「Test Case 管理」或「Test Run 管理」。
- 選擇專案後，頁面跳轉至對應的管理頁面。

### 3.2.2. 團隊管理介面
- 用於管理團隊的 Test Case Repo 資料表來源 URL。
- 必須包含一個驗證器，以檢查 URL 的有效性與連線狀態。

### 3.2.3. 團隊測試案例管理頁面
- **資料來源**: 使用在團隊管理介面設定的資料表 URL。
- **搜尋功能**:
    - 依標題 (Title) 進行模糊搜尋。
    - 依 TCG 單號進行過濾。
    - 依優先級 (Priority) 進行過濾。
    - 支援上述條件的組合查詢。
- **批次管理**:
    - 批次刪除測試案例。
    - 批次修改測試案例所連結的 TCG 單號。
- **列表介面功能**:
    - 可直接在列表上更改標題和連結的 TCG 單號。
    - 可依標題和優先級欄位進行排序。
- **使用者體驗**:
    - 需能記住使用者上次操作的設定（儲存在瀏覽器端）。
    - 點擊單一測試案例後，在不跳轉頁面的情況下顯示詳細內容。
- **詳細內容介面**:
    - 包含「編輯」和「刪除」按鈕。
    - 支援 Markdown 語法以正確顯示內容。
    - 當滑鼠懸停在 TCG 單號 (格式: `#TCGXXXXX.YYY.ZZZ`) 上時，顯示預覽內容，並提供連結以在新分頁中開啟。
- **編輯介面**:
    - 「前置條件 (Precondition)」、「步驟 (Steps)」、「預期結果 (Expected Result)」等欄位需提供支援 Markdown 的簡易編輯工具列。
- **附件管理**:
    - 支援測試案例的附件上傳與管理。
- **自訂欄位**:
    - 支援各團隊在 Lark Test Case Repo 中自訂的欄位。

### 3.2.4. 團隊測試執行管理頁面
- **資料來源**: 使用者需在 Lark 建立 Test Run 資料表，然後將連結貼到此頁面進行管理。
- **介面呈現**: 基本介面與「測試案例管理頁面」相同，但**不提供**編輯和刪除功能。
- **功能**:
    - 新增結果截圖 (Result Screenshot)。
    - 新增 JIRA Bug 的連結。

## 4. 底層架構

- **4.1. 資料庫**: 使用 SQLite 管理設定和暫存資料。
- **4.2. 元件**: 盡量使用成熟且定義明確的元件。
- **4.3. 前端框架**: 主要使用 Bootstrap。

## 5. 外接功能

- **5.1. 結果通知**: 能夠將測試結果傳送到指定的 Lark 公司群組或特定人員。

## 6. 額外開發原則

- **6.1. 簡潔性**: 不使用過於複雜或難以維護的方式進行開發。
